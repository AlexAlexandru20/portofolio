<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>{% block title %}Portfolio{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.css"
      rel="stylesheet"
    />
    <style>
      body {
        font-family: "Orbitron", sans-serif;
        background: linear-gradient(to bottom right, #000000, #0f0f1a);
      }

      .glow {
        text-shadow: 0 0 5px cyan, 0 0 10px cyan, 0 0 20px cyan;
      }

      .nav-link:hover {
        color: cyan;
        transition: 0.3s;
      }

      .progress-container {
        width: 100%;
        background-color: #4a5568;
        border-radius: 9999px;
        height: 1rem;
        overflow: hidden;
      }
      .progress-bar {
        height: 1rem;
        border-radius: 9999px;
        background: linear-gradient(
          90deg,
          rgba(0, 255, 255, 1) 0%,
          rgba(0, 155, 255, 1) 50%,
          rgba(0, 255, 255, 1) 100%
        );
        background-size: 200% 100%;
        animation: progress-glow 2s linear infinite;
        width: 0%;
        transition: width 1.5s ease-in-out;
      }
      @keyframes progress-glow {
        0% {
          background-position: 200% 0%;
        }
        100% {
          background-position: -200% 0%;
        }
      }
      .glow {
        text-shadow: 0 0 10px rgba(0, 255, 255, 0.5);
      }
      @keyframes float {
        0% {
          transform: translateY(0);
        }
        50% {
          transform: translateY(-6px);
        }
        100% {
          transform: translateY(0);
        }
      }
      .animate-float {
        animation: float 4s ease-in-out infinite;
      }
      .bg-grid-small-cyan {
        background-image: linear-gradient(
            rgba(0, 255, 255, 0.05) 1px,
            transparent 1px
          ),
          linear-gradient(90deg, rgba(0, 255, 255, 0.05) 1px, transparent 1px);
        background-size: 20px 20px;
      }

      @keyframes glowline {
        0% {
          box-shadow: 0 0 10px #22d3ee, 0 0 20px #22d3ee, 0 0 30px #22d3ee;
        }
        50% {
          box-shadow: 0 0 20px #06b6d4, 0 0 30px #06b6d4, 0 0 40px #06b6d4;
        }
        100% {
          box-shadow: 0 0 10px #22d3ee, 0 0 20px #22d3ee, 0 0 30px #22d3ee;
        }
      }

      .animate-glowline {
        animation: glowline 3s ease-in-out infinite;
      }
      #hero-canvas-container {
        width: 100%;
        height: 300px;
        margin: 0 auto;
        position: relative;
        overflow: hidden;
      }

      #hero-canvas {
        width: 100%;
        height: 100%;
        display: block;
      }

      @media (max-width: 640px) {
        #hero-canvas-container {
          height: 250px;
        }
      }
      #hero-canvas-container::after {
        content: "";
        position: absolute;
        pointer-events: none;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        border-radius: 1rem;
        background: radial-gradient(
          ellipse at center,
          rgba(0, 0, 0, 0) 50%,
          rgba(0, 0, 0, 0.8) 100%
        );
        mix-blend-mode: multiply;
        z-index: 10;
      }

      @keyframes floatZoom {
        0%,
        100% {
          transform: scale(1) translateY(0);
        }
        50% {
          transform: scale(1.1) translateY(-10px);
        }
      }

      .bg-motion {
        animation: floatZoom 12s ease-in-out infinite;
        transition: transform 0.2s ease-out;
        will-change: transform;
      }
    </style>
  </head>

  <body class="text-white overflow-x-hidden">
    <header
      class="bg-black bg-opacity-80 backdrop-blur sticky top-0 z-50 py-4 animate__animated animate__fadeInDown"
    >
      <nav
        class="container mx-auto px-4 flex flex-wrap items-center justify-between"
      >
        <h1 class="text-3xl glow font-bold">
          <a href="/" class="block px-2 py-1 nav-link">Alx.dev</a>
        </h1>
        <button
          id="nav-toggle"
          class="block md:hidden text-cyan-500 focus:outline-none"
        >
          <svg
            class="w-6 h-6"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16"
            ></path>
          </svg>
        </button>
        <div
          id="nav-content"
          class="w-full md:flex md:items-center md:w-auto hidden md:block"
        >
          <div class="text-lg md:flex md:gap-4 mt-4 md:mt-0">
            <a
              href="{{url_for('main.index')}}"
              class="block px-2 py-1 {% if request.path == url_for('main.index') %}text-cyan-500{% else %}nav-link{% endif %}"
              >Home</a
            >
            <a
              href="{{url_for('main.about')}}"
              class="block px-2 py-1 {% if request.path == url_for('main.about') %}text-cyan-500{% else %}nav-link{% endif %}"
              >About</a
            >
            <a
              href="{{url_for('main.contact')}}"
              class="block px-2 py-1 {% if request.path == url_for('main.contact') %}text-cyan-500{% else %}nav-link{% endif %}"
              >Contact</a
            >
          </div>
        </div>
      </nav>
    </header>
    <main class="container mx-auto px-4 py-12">
      {% with messages = get_flashed_messages(with_categories=true) %} {% if
      messages %} {% for category, message in messages %}
      <div
        class="mb-4 p-4 bg-green-800 rounded animate__animated animate__fadeIn"
      >
        {{ message }}
      </div>
      {% endfor %} {% endif %} {% endwith %} {% block content %}{% endblock %}
      <a
        href="https://wa.me/0750423987?text=Hello%21%20I%20would%20like%20to%20discuss%20a%20potential%20collaboration.%20Thank%20you%21%20%F0%9F%99%8F"
        target="_blank"
        rel="noopener noreferrer"
        aria-label="Open WhatsApp chat"
        class="fixed bottom-6 right-6 z-50 group w-16 h-16 rounded-full bg-green-500 shadow-lg shadow-green-600/70 flex items-center justify-center transition-transform duration-300 hover:scale-110 hover:bg-green-600"
        style="will-change: transform"
      >
        <!-- Pulsing glow ring -->
        <span
          class="absolute inset-0 rounded-full bg-green-400 opacity-75 blur-lg animate-pulse"
          style="filter: blur(8px)"
        ></span>

        <!-- Animated expanding ring -->
        <span
          class="absolute inset-0 rounded-full border-2 border-green-400 opacity-50 animate-[ping_2s_linear_infinite]"
        ></span>

        <!-- WhatsApp Icon -->
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="currentColor"
          viewBox="0 0 24 24"
          class="relative w-9 h-9 text-white transition-colors duration-300 group-hover:text-green-100 animate-[pulse_3s_ease-in-out_infinite]"
        >
          <path
            d="M20.52 3.48A11.854 11.854 0 0012 0C5.373 0 0 5.373 0 12c0 2.12.56 4.17 1.62 5.98L0 24l6.3-1.62A11.9 11.9 0 0012 24c6.627 0 12-5.373 12-12 0-3.2-1.26-6.2-3.48-8.52zm-8.48 17.55a9.57 9.57 0 01-5.14-1.49l-.37-.24-3.76 1 1-3.69-.24-.38a9.595 9.595 0 011.5-11.87 9.527 9.527 0 0114.56 11.85 9.57 9.57 0 01-7.99 4.73zm5.06-6.67c-.27-.14-1.6-.78-1.85-.87-.25-.1-.44-.14-.63.14-.18.27-.7.87-.86 1.05-.16.18-.32.2-.6.07-.27-.14-1.13-.42-2.15-1.33-.8-.72-1.34-1.6-1.5-1.87-.15-.27-.02-.42.12-.56.12-.12.27-.32.4-.48.13-.16.18-.27.27-.45.09-.18.05-.34-.02-.48-.07-.14-.63-1.52-.87-2.08-.23-.55-.47-.48-.63-.49l-.54-.01c-.18 0-.48.07-.73.34s-.96.94-.96 2.3c0 1.36.98 2.68 1.12 2.87.14.18 1.93 2.94 4.68 4.12.65.28 1.16.45 1.56.58.66.21 1.26.18 1.74.11.53-.08 1.6-.65 1.83-1.28.23-.63.23-1.17.16-1.28-.07-.11-.25-.18-.52-.32z"
          />
        </svg>
      </a>
    </main>
    <script>
      document
        .getElementById("nav-toggle")
        .addEventListener("click", function () {
          var content = document.getElementById("nav-content");
          content.classList.toggle("hidden");
        });
    </script>
    <!-- AOS JS -->
    <script src="https://cdn.jsdelivr.net/npm/aos@2.3.4/dist/aos.js"></script>
    <script>
      AOS.init({
        duration: 1000, // animation duration
        once: true, // only animate once
      });
    </script>
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        // When AOS triggers, animate progress bars
        document.querySelectorAll(".progress-fill").forEach((bar) => {
          // When the parent container is in view
          bar.parentElement.addEventListener("aos:in", () => {
            // Animate width to target
            const targetWidth = bar.getAttribute("data-width");
            bar.style.width = targetWidth;
          });
        });
      });
    </script>
    <script>
      // Function to animate a single progress bar
      function animateProgressBar(progressBar, targetWidth, duration) {
        let currentWidth = 0;
        const increment = targetWidth / (duration / 16); // Assuming 60fps (1000ms / 60 â‰ˆ 16ms per frame)

        function updateWidth() {
          if (currentWidth < targetWidth) {
            currentWidth += increment;
            if (currentWidth > targetWidth) currentWidth = targetWidth; // Prevent overshooting
            progressBar.style.width = `${currentWidth}%`;
            requestAnimationFrame(updateWidth); // Continue animation
          }
        }

        requestAnimationFrame(updateWidth); // Start animation
      }

      // Use Intersection Observer to trigger animations when skills section is in view
      document.addEventListener("DOMContentLoaded", () => {
        const section = document.querySelector("#skills-section");
        const progressBars = section.querySelectorAll(".progress-bar");

        const observer = new IntersectionObserver(
          (entries, observer) => {
            entries.forEach((entry) => {
              if (entry.isIntersecting) {
                progressBars.forEach((bar) => {
                  const targetWidth = parseFloat(
                    bar.getAttribute("data-width")
                  );
                  animateProgressBar(bar, targetWidth, 1000); // Animate to target width over 1.5 seconds
                });
                observer.unobserve(section); // Stop observing once animated
              }
            });
          },
          {
            threshold: 0.1, // Trigger when 50% of the section is visible
          }
        );

        observer.observe(section);
      });
    </script>
    <script>
      document.addEventListener("scroll", () => {
        const bg = document.querySelector(".bg-motion");
        if (bg) {
          const offset = window.scrollY * 0.1;
          bg.style.transform = `translateY(${offset}px) scale(1.02)`;
        }
      });
    </script>
    {% block scripts %}{% endblock %}
  </body>
</html>
